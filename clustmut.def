BootStrap: docker
From: rocker/tidyverse:3.5.3

%environment
    PATH="/clustmut_bin:$PATH"

%labels
    Maintainer David Mas-Ponte <david.mas@irbbarcelona.org>
    Version v0.0.1

%post
    R -e 'install.packages("BiocManager")'
    R -e 'BiocManager::install("VariantAnnotation")'

    git clone http://fsupeksvr.irbbarcelona.pcb.ub.es/gitlab/dmas/genomicHelpersDMP.git genomicHelpersDMP_src

    cd genomicHelpersDMP_src
    R CMD INSTALL --no-multiarch --with-keep.source .
    
    git clone http://fsupeksvr.irbbarcelona.pcb.ub.es/gitlab/dmas/clustMut.git clustMut_src
    cd clustMut_src
    git checkout dev
    R CMD INSTALL --no-multiarch --with-keep.source .

    mkdir clustmut_bin
    ln -s clustmut /clustmut_bin

%help
    Singularity definition to install clustmut version DEV.

%runscript
    echo "Container was created $NOW"
    echo "Arguments received: $*"
    exec echo "$@"


